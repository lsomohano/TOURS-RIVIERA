<%- include('../../partials/titles', { title: 'Crear nuevo tour', botones: botones }) %>
<%- include('../../partials/messages') %>

<!-- Main content -->
<section class="content">
  <!-- Default box -->
  <div class="card">
    <div class="card-body">
      <form action="/admin/tours/new" method="POST" enctype="multipart/form-data">
        
        <div class="form-group">
          <label for="nombre">Nombre del tour</label>
          <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Ej. Tour a Chichén Itzá" required>
        </div>

        <div class="form-group">
          <label for="descripcion">Descripción</label>
          <textarea class="form-control" id="descripcion" name="descripcion" rows="4" placeholder="Describe brevemente el tour..."></textarea>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="lugar_salida">Lugar de salida</label>
              <input type="text" class="form-control" id="lugar_salida" name="lugar_salida" placeholder="Ej. Playa del Carmen">
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="lugar_destino">Lugar de destino</label>
              <input type="text" class="form-control" id="lugar_destino" name="lugar_destino" placeholder="Ej. Tulum">
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label for="duracion">Duración (horas)</label>
              <input type="number" class="form-control" id="duracion" name="duracion" min="1">
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="cupo_maximo">Cupo máximo</label>
              <input type="number" class="form-control" id="cupo_maximo" name="cupo_maximo" min="1">
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="precio">Precio ($MXN)</label>
              <input type="number" step="0.01" class="form-control" id="precio" name="precio" required>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="tipo">Tipo</label>
              <select class="form-control" id="tipo" name="tipo">
                <option value="">-- Selecciona --</option>
                <option value="aventura">Aventura</option>
                <option value="relajacion">Relajación</option>
                <option value="cultural">Cultural</option>
              </select>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <label for="modalidad">Modalidad</label>
              <select class="form-control" id="modalidad" name="modalidad" required>
                <option value="grupo">Grupo</option>
                <option value="privado">Privado</option>
              </select>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="idioma">Idioma</label>
              <input type="text" class="form-control" id="idioma" name="idioma" value="es">
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <label for="imagen_destacada">Imagen destacada</label>
              <div class="custom-file">
                <input type="file" class="custom-file-input" id="imagen_destacada" name="imagen_destacada" accept="image/*">
                <label class="custom-file-label" for="imagen_destacada">Selecciona una imagen</label>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="fecha_inicio">Fecha inicio</label>
              <input type="date" class="form-control" id="fecha_inicio" name="fecha_inicio">
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="fecha_fin">Fecha fin</label>
              <input type="date" class="form-control" id="fecha_fin" name="fecha_fin">
            </div>
          </div>
        </div>

        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="disponible" name="disponible" checked>
          <label class="form-check-label" for="disponible">Disponible</label>
        </div>

        <div class="form-check mb-3">
          <input type="checkbox" class="form-check-input" id="publicado" name="publicado">
          <label class="form-check-label" for="publicado">Publicado</label>
        </div>

        <button type="submit" class="btn btn-primary btn-block">Guardar tour</button>
      </form>
    </div>
    <!-- /.card-body -->
  </div>
  <!-- /.card -->
</section>
<!-- /.content -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const fileInputs = document.querySelectorAll('.custom-file-input');
    fileInputs.forEach(input => {
      input.addEventListener('change', function () {
        const fileName = this.files[0]?.name || 'Selecciona una imagen';
        this.nextElementSibling.innerText = fileName;
      });
    });
  });
</script>
